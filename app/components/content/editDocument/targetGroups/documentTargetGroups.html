<div class="panel panel-border{{document.documentTypeId}}">

    <!-- Title -->
    <div class="panel-heading panel{{document.documentTypeId}}">
        <h3 class="panel-title selected-heading"><span class="fa fa-bullseye"></span> MÃ¥lgrupper</h3>
    </div>

    <div class="panel-body">

        <div class="form-group">

            <!-- Table displaying the target groups added to the document -->
            <table class="table table-condensed" id="target-group-table">

                <!-- Table head -->
                <thead>
                    <tr>
                        <th>Navn</th>
                        <th>Obligatorisk</th>
                        <th>Frist</th>
                        <th>Handling</th>
                        <th>Beskrivelse</th>
                        <th></th>
                    </tr>
                </thead>

                <!-- Table body -->
                <tbody>
                    <!-- For all target groups in the document display: -->
                    <tr ng-repeat="group in document.targetGroups">

                        <!-- NAME -->
                        <td class="target-group-info">{{target_groups_dict[group.targetGroupId].name}}</td>

                        <!-- MANDATORY -->
                        <td class="target-group-info">
                            <select class="form-control" name="targetGroups" id="mandatory" ng-model="group.mandatoryId" ng-change="updateMandatoryNotices()" required>
                                <option value="" selected>Ingen</option>
                                <option ng-repeat="mandatory in mandatory_list" ng-hide="mandatory.isArchived" value={{mandatory.id}}>{{mandatory.name}}</option>
                            </select>
                        </td>

                        <!-- Deadline -->
                        <td class="target-group-info">
                            <input class="form-control" type="text" id="deadline" ng-model="group.deadline">
                        </td>

                        <!-- ACTION -->
                        <td class="target-group-info">
                            <select class="form-control" name="" id="action" ng-model="group.actionId">
                                <option value="" selected>Ingen</option>
                                <option ng-repeat="action in actions_option_list" ng-hide="action.isArchived" value={{action.value}}>{{action.name}}</option>
                            </select>
                        </td>

                        <!-- Description -->
                        <td class="target-group-info">
                            <input type="text" class="form-control" id="description"  ng-model="group.description"/>
                        </td>

                        <!-- Delete target group from document -->
                        <td>
                            <span class="fa fa-remove delete-target-group-icon clickable" ng-click="removeTargetGroup(group); EditDocumentController.DocumentForm.$setDirty()"></span>
                        </td>
                    </tr>

                </tbody>
            </table>

            <!-- Add new target group to document -->
            <button class="btn btn-default" type="button" ng-click="openModal('app/components/content/editDocument/targetGroups/addDocumentTargetGroupModal.html', 'AddDocumentTargetGroupModelController')"><span class="fa fa-plus-circle plus-icon"></span> Legg til ny</button>
            
            <!-- Additional fields -->
                <div class="">
                    <!-- Additional fields for mandatory target groups -->
                    <div class="form-group" ng-show="hasMandatoryTargetGroup()">

                        <label for="targetGroupHjemmel" class="col-sm-2 control-label"> Hjemmel: </label>
                        <div class="form-group col-sm-10">
                            <input type="text" id="targetGroupHjemmel" class="form-control" ng-model="document.hjemmel" ng-click="disableTargetGroupDecidedBy()" ng-readonly="additionalFieldForMandatoryGroupsSelected">
                        </div>


                        <label for="targetGroupDecidedBy" class="col-sm-2 control-label"> Besluttet av: </label>
                        <div class="form-group col-sm-10">
                            <input type="text" id="targetGroupDecidedBy" class="form-control" ng-model="document.decidedBy" ng-click="disableTargetGroupHjemmel()" ng-readonly="!additionalFieldForMandatoryGroupsSelected">
                        </div>

                        <label for="targetGroupReplacedBy" class="col-sm-2 control-label"> Erstattes av: </label>
                        <div class="form-group col-sm-10">
                            <input type="text" id="targetGroupReplacedBy" class="form-control" ng-model="document.replacedBy">
                        </div>
                    </div>

                    <!-- Additional fields for optional target groups -->
                    <div class="form-group" ng-repeat="mandatoryNotice in document.mandatoryNotices">

                        <label class="col-sm-2">Merknad til {{getMandatoryNameById(mandatoryNotice.mandatoryId)}} gruppe </label>
                        <div class="form-group col-sm-10">
                            <input type="text" class="form-control" ng-model="mandatoryNotice.notice">
                        </div>

                    </div>
                </div>
        </div>


    </div>
</div>




















